---
title: "Mental Health during Covid-19"
author: "Ava Tillman, Karen Liu, Lauren Simpson"
date: "November 20th, 2020"
output:
  rmdformats::readthedown:
    thumbnails: false
    highlight: NULL
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, fig.align="center")
library(tidyverse)
library(tidytext)
library(wordcloud)
library(textdata)
library(tm)
library(xtable)
```

# Introduction

This blog post looks at different aspects of mental health during the 2020 Covid-19 pandemic. The pandemic has been and continues to be a great source of anxiety, depression, and general negative feelings for individuals, given the need for quarantine, social distancing, and a general departure from normal, everyday life pre-pandemic. It is important to examine the impact of the pandemic on mental health and explore anxiety and depression in the U.S. during this time in different ways--this will help us understand and respond to the pandemic as a country. Our main takeaway from our Shiny App project was the strong correlation between anxiety and depression, so we wanted to examine that further in our blog post. In this blog post, we examine symptom severity of anxiety and depression in different demographic groups, most common sentiments and words used in tweets about Covid 19, and [KAREN]. 

```{r, echo = FALSE, warning=FALSE, message=FALSE}
## GENERAL WORD CLOUD

# read in data for general word cloud
covid_words <- read_csv("/Users/avatillman/git/Blog-Theory-of-Mind/text analysis/covid_words.csv")

pal <- brewer.pal(8, "Dark2") # define color palette for word cloud

set.seed(2) # set seed for reproducibility

# create word cloud
covid_words %>%
  with(wordcloud(words = word, freq = n,
                 max.words = 50, random.order = F,
                 colors = pal,
                 scale = c(3, 1), rot.per = 0.2,
                 family = "sans"))
```

## Data

Dataset 1: CDC Anxiety/Depression Surveys

- Link: [Link to the Dataset](https://www.cdc.gov/nchs/covid19/health-care-access-and-mental-health.htm)
- We use data from the household “pulse polls” that were created by the CDC and the U.S. Census Bureau in the early stages of the pandemic in the US, starting on April 23. We focused on the “Anxiety and Depression” survey, which asked four questions about the frequency of depressive/anxious emotions in the past seven days.
- The data was broken down into different categories, including race, gender, age group, and education level. By examining the quantitative values associated with anxiety and depression from the survey, we can explore the ways that depressive/anxious symptoms change across different demographic groups.
- On their website, the CDC notes that this survey uses data collected in a somewhat unconventional manner, given the short duration between data collection and data analysis.


Dataset 2: Covid-19 Tweets

- Link: [Link to the dataset](https://www.kaggle.com/gpreda/covid19-tweets)
- Description: This is a dataset from kaggle called “COVID19 Tweets” that came in the format of a .csv file. It contains all tweets from 07/24/20 through 08/30/20 that used the hashtag #covid19. They were pulled using Twitter API and a Python script. The dataset contains the following information: user name, location, other variables about the user (i.e., their description, number of followers, favorites, etc.), date of the tweet, full text tweet, hashtags, source, and whether or not it is a retweet.


# Results

## Clustering of Anxiety Depression rates by Demographic Group
[Click here to Explore these Patterns!](https://avatillman.shinyapps.io/kmeans_app/)

# {.tabset .tabset-fade .tabset-pills}

## Trends
<!-- You can make a bulleted list like this: -->

<!-- - item 1 -->
<!-- - item 2 -->
<!-- - item 3 -->
Conclusions: Confirmation of the strong positive linear relationship between anxiety and depression
Clusters demonstrate that patterns in anxiety and depression are largely influenced by demographic group
Specifically, 
- Teens and young adults have the highest levels of anxiety and depression, while elderly people tend to have the lowest levels
- For non-hispanic groups, Asians have the lowest levels, then white, then black, and hispanic and other races tend to have the highest values of anxiety and depression
- Females tend to have higher levels than males
Most stressed/anxious: less than a high school diploma, lowest is bachelor’s degree or higher

## Impact

Are certain groups (teens, hispanics/”other races”, females, and people with less than a high school diploma) responding worse to the Pandemic? Are these the people who it may be disproportionately affecting? Should we try to focus resources and accessibility to resources on these groups?

## Limitations

Limitations: Only have data for anxiety and depression during the pandemic
Hard to compare to normal circumstances: are certain groups experiencing higher levels of anxiety and depression than they normally would? We can’t really tell
Strengthen our research by increasing the scope (expand geographically and temporally) of the data on anxiety/depression levels
Population: this data is specifically for people in the US and those who chose to take the survey, but it could be extended to a global project to see if different demographic groups in other countries have similar sentiments

# {-}

## Text Analysis for Covid Tweets
# {.tabset .tabset-fade .tabset-pills}

## Sentiment Analysis

We conducted a sentiment analysis on full text tweets from July 24 to August 30 2020 that used the #covid19. We separated the tweets into unigrams and performed a sentiment analysis, using sentiments from the nrc lexicon. We found that the most common sentiment in the tweets was Negative, followed by Positive, Fear, Trust, Anger, Sadness, Disgust, Anticipation, Joy, and the least common sentiment was surprise. After the general sentiment analysis, we examined the top 10 most common words that belonged to sentiments related to anxiety and depression, specifically Positive, Negative, Fear, and Sadness. Interestingly, quite a few of the top 10 words overlap for Negative, Fear, and Sadness, such as: pandemic, death, hospital, etc. Overall, exploring the most common anxiety and depression related words individuals used in tweets about covid 19 helps us to gain a new perspective on how individuals were feeling during this time. 

```{r, echo=FALSE, warning=FALSE, message=FALSE}
## SENTIMENT ANALYSIS

# read in data for general sentiment analysis
nrc_tweets_sent <- read_csv("/Users/avatillman/git/Blog-Theory-of-Mind/text analysis/nrc_tweets_sent.csv")

# plotting number of words by all sentiments in the tweets
nrc_tweets_sent %>%
  ggplot(aes(x = reorder(sentiment,n), y = n, color = sentiment, fill = sentiment)) +
  geom_col() +
  xlab(NULL) +
  coord_flip() +
  labs(x = "Sentiments",
       y = "Number of Words",
       title="Number of Words by Sentiment in Covid-19 Tweets") +
  guides(color = "none", fill = "none")

# read in data for anxiety and depression related sentiment analysis
nrc_tweets_words <- read_csv("/Users/avatillman/git/Blog-Theory-of-Mind/text analysis/nrc_tweets_words.csv")

# plotting words by anxiety and depression relevant sentiments
ggplot(data = nrc_tweets_words, aes(x = reorder(word, n),
                                    y = n,
                                    fill = as.factor(n))) +
  geom_col(show.legend = FALSE) +
  labs(x = "Words", y = "Number of Words",
       title="The top 10 most common words by relevant sentiments") +
  facet_wrap(~sentiment_label, ncol = 2, scales = "free") +
  coord_flip()

```

## Comparison World Cloud

Since we noticed some overlap in the top 10 most common words for anxiety and depression related sentiments, we decided to create a comparison word cloud to visually depict words by these 4 sentiments. Of note, comparison clouds are similar to typical word clouds, but they allow you to visualize the most frequent words across different categories. Additionally, the code for comparison clouds requires the data to be formatted into a term document matrix (tdm), as demonstrated above. The words are colored by the sentiment they primarily belong to, and the size of the words indicates how frequently they were used. We found that pandemic was the most common Sadness word, government and risk were among the most common Fear words, virus was the most common Negative word, and vaccine was the most common Positive word.

```{r, warning = FALSE, message=FALSE}
## COMPARISON WORD CLOUD

# read in data to create term document matrix for comparison and commonality clouds
nrc_tweets_cloud <- read_csv("/Users/avatillman/git/Blog-Theory-of-Mind/text analysis/nrc_tweets_cloud.csv")

# create a term document matrix for the comparison.cloud function
tdm <- nrc_tweets_cloud %>%
  # need to take unigrams in word out to create the matrix
  select(-word) %>%
  as.matrix() 

# add the unigrams in word back in once matrix is created
rownames(tdm) <- nrc_tweets_cloud$word

# create the comparison cloud

set.seed(10) # set seed for reproducibility

comparison.cloud(tdm, random.order=FALSE, 
                 colors = c("#9E31CC", "#BD1550", "#5E8C6A", "#3299BB"), 
                 title.size=2,
                 title.colors = c("#9E31CC", "#BD1550", "#5E8C6A", "#3299BB"),
                 title.bg.colors = c("#DEC8E8", "#EDC5D3", "#CCD9CF", "#C6E9F5"),
                 max.words=90)
```


## Commonality World Cloud

A commonality cloud is a type of word cloud that allows you to visualize the most common words across different categories. Similar to the comparison cloud, a term document matrix is needed. We only compared words across the fear, negative, and sadness sentiments, as positive did not have enough words in common with the other three to produce a meaningful cloud. Based on the cloud produced, we can see that pandemic is by far the most commonly used word across the fear, negative, and sadness sentiments. Death is the second most common. The rest of the words in purple indicate other words that are common and shared by all three sentiment categories. The large amount of purple words demonstrates that there are numerous words in the covid 19 tweets that span the sentiment categories of fear, negative, and sadness. 

```{r}
## COMMONALITY WORD CLOUD

# create a new term document matrix without positive
tdm_common <- nrc_tweets_cloud %>%
  # need to take unigrams in word out to create the matrix
  select(-word, -positive) %>%
  as.matrix() 

# add the unigrams in word back in once matrix is created
rownames(tdm_common) <- nrc_tweets_cloud$word

# create the commonality cloud

set.seed(2) # set seed for reproducibility

commonality.cloud(tdm_common, random.order = FALSE, 
                  scale = c(5, .5), 
                  colors = c("#9E31CC", "#BD1550", "#5E8C6A", "#3299BB"), 
                  max.words = 200)
```


# {-}

## Spatial Data


# Conclusion

Overall, the results from the text and sentiment analyses demonstrate that individuals have been expressing high numbers of words associated with sadness, fear, and general negativity in their tweets about covid19. These findings are in line with the high levels of anxiety and depression during the pandemic that we observed in the CDC Anxiety and Depression dataset. Additionally, we were able to examine specific words that belonged to each of these sentiments individually, as well as words and themes that spanned across sentiments, most notably, “pandemic.” These findings make a lot of sense, as we know from our own personal experiences that the pandemic has been a great source of sadness, fear, and negative emotions. 

Limitations of this text and sentiment analysis include the fact that the data was only collected over a short period of time, from July 24 to August 30, 2020, and the dataset only contained tweets using the hashtag #covid19. This month-long timeframe is a small snapshot of tweets during the pandemic, so the tweets analyzed in this text analysis may not be representative of tweets, sentiments, or most common words utilized during the pandemic as a whole, as they may only be specific to this time period. Additionally, there were likely many other tweets individuals posted about the coronavirus or pandemic without using #covid19, which were not included in our analysis. Thus, our findings may not be generalizable to all tweets about the coronavirus, but rather only tweets in which individuals use #covid19. 

Our text analyses could be improved by examining tweets about the pandemic over a longer period of time, for example, a few months, rather than just one. Additionally, we could broaden the scope of hashtags used and examine tweets with other hashtags related to the coronavirus, rather than relying on one, #covid19. Furthermore, in future work it would be interesting to conduct text and sentiment analyses not only on coronavirus related tweets, but also text such as news stories, academic research articles, or even posts from other social media sites to get a more comprehensive view of how individuals are using words to express certain sentiments during this time.

